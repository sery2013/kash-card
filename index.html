<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Passport</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä -->
    <div id="editor-section" class="section">
        <div class="container">
            <div class="header-bar">
                <span class="username">ByHappyHearts</span>
                <img src="assets/logo.svg" alt="Rise Logo" class="rise-logo">
            </div>

            <div class="passport-card">
                <!-- –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ —Å —Ñ–æ–Ω–æ–º -->
                <div class="card-background">
                    <img id="avatar-preview" src="assets/default-avatar.png" alt="Avatar Preview" class="avatar-img">
                </div>

                <input type="file" id="avatar-upload" accept="image/*" style="display:none;">
                <button class="upload-btn" onclick="document.getElementById('avatar-upload').click()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ê–≤–∞—Ç–∞—Ä</button>
                <p id="upload-status" class="status"></p>

                <div class="username-input-wrapper">
                    <label for="username-input">–õ–æ–≥–∏–Ω:</label>
                    <input type="text" id="username-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Discord –ª–æ–≥–∏–Ω">
                </div>
                <div id="display-username" class="display-username">–í–∞—à –õ–æ–≥–∏–Ω</div>

                <!-- –í—ã–±–æ—Ä –±–µ–π–¥–∂–µ–π -->
                <div class="badges-selection">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –±–µ–π–¥–∂–∏:</h3>
                    <label class="checkbox-label">
                        <input type="checkbox" value="CONTENT CREATOR" class="badge-checkbox"> CONTENT CREATOR
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" value="SHREDDED" class="badge-checkbox"> SHREDDED
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" value="Rice" class="badge-checkbox"> Rice
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" value="Noob" class="badge-checkbox"> Noob
                    </label>
                    <!-- –ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–µ–π–¥–∂–∞ -->
                    <label class="checkbox-label">
                        <input type="checkbox" value="VIP" class="badge-checkbox"> VIP
                    </label>
                </div>

                <div class="activity-description">
                    Crafting pixels, pumping vibes, farming retweets üåÄ
                </div>

                <button id="generate-btn" class="generate-btn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Å–ø–æ—Ä—Ç (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
    <div id="generated-section" class="section" style="display: none;">
        <div class="container">
            <h2>–í–∞—à –≥–æ—Ç–æ–≤—ã–π –ø–∞—Å–ø–æ—Ä—Ç:</h2>
            <div id="generated-passport" class="generated-passport">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
            <div class="generated-actions">
                <button id="download-btn" class="action-btn download-btn">–°–∫–∞—á–∞—Ç—å –∫–∞–∫ PNG</button>
                <button id="twitter-btn" class="action-btn twitter-btn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ Twitter</button>
                <button id="back-btn" class="action-btn back-btn">–ù–∞–∑–∞–¥ –∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="script.js"></script>

    <!-- –î–æ–±–∞–≤–ª—è–µ–º JavaScript –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π -->
    <script>
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞
        document.getElementById('avatar-upload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∞–π–ª - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            if (!file.type.startsWith('image/')) {
                document.getElementById('upload-status').textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.';
                document.getElementById('upload-status').className = 'status error';
                return;
            }

            // –°–æ–∑–¥–∞–µ–º FileReader –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
            const reader = new FileReader();
            reader.onload = function(event) {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Data URL –≤ src –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                document.getElementById('avatar-preview').src = event.target.result;
                document.getElementById('upload-status').textContent = '–ê–≤–∞—Ç–∞—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!';
                document.getElementById('upload-status').className = 'status success';
            };
            reader.onerror = function() {
                document.getElementById('upload-status').textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–≤–∞—Ç–∞—Ä–∞.';
                document.getElementById('upload-status').className = 'status error';
            };

            // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∫–∞–∫ Data URL
            reader.readAsDataURL(file);
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å"
        document.getElementById('generate-btn').addEventListener('click', function() {
            const username = document.getElementById('username-input').value.trim();
            const avatarSrc = document.getElementById('avatar-preview').src;
            const badges = Array.from(document.querySelectorAll('.badge-checkbox:checked')).map(cb => cb.value);
            const activityDesc = document.querySelector('.activity-description').textContent;

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Å–ø–æ—Ä—Ç
            const generatedPassport = document.getElementById('generated-passport');
            generatedPassport.innerHTML = `
                <div class="card-background">
                    <img src="${avatarSrc}" alt="Generated Avatar" class="avatar-img">
                </div>
                <div class="display-username">${username || '–í–∞—à –õ–æ–≥–∏–Ω'}</div>
                <div class="badges-row">
                    ${badges.map(badge => `<span class="badge badge-primary">${badge}</span>`).join('')}
                </div>
                <div class="activity-description">${activityDesc}</div>
            `;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Å–ø–æ—Ä—Ç
            document.getElementById('editor-section').style.display = 'none';
            document.getElementById('generated-section').style.display = 'block';
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
        document.getElementById('download-btn').addEventListener('click', function() {
            html2canvas(document.getElementById('generated-passport')).then(canvas => {
                const link = document.createElement('a');
                link.download = 'discord-passport.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞
        document.getElementById('back-btn').addEventListener('click', function() {
            document.getElementById('editor-section').style.display = 'block';
            document.getElementById('generated-section').style.display = 'none';
        });
    </script>
</body>
</html>
